# Sumber AI - Supabase Setup Guide

To integrate the news feature with a database, you need to perform the following setup in your Supabase project.

## 1. Create the `articles` Table

Navigate to the **SQL Editor** in your Supabase dashboard and run the following query to create the `articles` table.

```sql
CREATE TABLE public.articles (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  title TEXT NOT NULL,
  description TEXT,
  content TEXT,
  author TEXT,
  date DATE,
  read_time TEXT,
  image_url TEXT,
  featured BOOLEAN DEFAULT FALSE,
  language TEXT, -- 'id' or 'en'
  tags TEXT[]
);
```

## 2. Enable Row Level Security (RLS)

For security, it's crucial to enable Row Level Security on the new table.

```sql
ALTER TABLE public.articles ENABLE ROW LEVEL SECURITY;
```

## 3. Create Helper Function for Role Checking
The application's authorization logic relies on a helper function in the database to get the current user's role from the `profiles` table. This is more secure than relying on JWT claims, which can become stale. The RLS policies below will use this function. The rest of the app also depends on this function.

Run this in the **SQL Editor**:
```sql
-- Note: This function is used by both the app client and the RLS policies.
-- It securely returns the role of the currently logged-in user.
CREATE OR REPLACE FUNCTION public.get_my_role()
RETURNS TEXT
LANGUAGE sql STABLE
AS $$
  SELECT role FROM public.profiles WHERE id = auth.uid()
$$;
```

## 4. Create RLS Policies

These policies will control who can access the data. We will make the articles readable by everyone, but only allow users with an `admin` or `operator` role to create, update, or delete them. These policies use the `get_my_role()` function created above.

Run these queries in the **SQL Editor**:

```sql
-- Policy 1: Allow public read access to everyone
CREATE POLICY "Allow public read access"
ON public.articles
FOR SELECT
USING (TRUE);

-- Policy 2: Allow admins and operators to insert new articles
-- This policy fixes the "new row violates row-level security policy" error.
-- It now correctly checks the user's role from the 'profiles' table.
CREATE POLICY "Allow insert for admins and operators"
ON public.articles
FOR INSERT
WITH CHECK ((SELECT get_my_role()) IN ('admin', 'operator'));

-- Policy 3: Allow admins and operators to update articles
CREATE POLICY "Allow update for admins and operators"
ON public.articles
FOR UPDATE
USING ((SELECT get_my_role()) IN ('admin', 'operator'));

-- Policy 4: Allow admins and operators to delete articles
CREATE POLICY "Allow delete for admins and operators"
ON public.articles
FOR DELETE
USING ((SELECT get_my_role()) IN ('admin', 'operator'));
```

## 5. Insert Sample Data

To populate your news feed, run the following `INSERT` statement in the **SQL Editor**. This will add the initial set of articles to your new table.

```sql
INSERT INTO public.articles (title, description, content, author, date, read_time, image_url, featured, language, tags)
VALUES
(
  'OpenAI Luncurkan GPT-5: Revolusi Baru dalam AI Conversational',
  'Model bahasa terbaru OpenAI menunjukkan kemampuan luar biasa dalam pemahaman konteks dan reasoning yang lebih mendalam.',
  '<p class="mb-4 text-lg leading-relaxed">OpenAI kembali menggebrak dunia teknologi dengan pengumuman peluncuran Generative Pre-trained Transformer 5, atau yang lebih dikenal sebagai GPT-5. Model bahasa terbaru ini digadang-gadang akan membawa revolusi baru dalam cara manusia berinteraksi dengan kecerdasan buatan.</p><p class="mb-4 text-lg leading-relaxed">Dibandingkan pendahulunya, GPT-4, model ini menunjukkan peningkatan signifikan dalam beberapa area kunci. Salah satu yang paling menonjol adalah kemampuan pemahaman konteks yang jauh lebih dalam dan luas. GPT-5 mampu mempertahankan alur percakapan yang kompleks dalam jangka waktu yang lebih lama, mengurangi repetisi, dan memberikan jawaban yang lebih relevan secara kontekstual.</p><h3 class="text-2xl font-bold text-white mt-6 mb-3">Peningkatan Kemampuan Penalaran</h3><p class="mb-4 text-lg leading-relaxed">Selain itu, kemampuan penalaran (reasoning) logis dan matematisnya juga ditingkatkan secara drastis. Dalam serangkaian tes benchmark, GPT-5 berhasil menyelesaikan masalah-masalah kompleks yang sebelumnya menjadi tantangan besar bagi model AI. Ini membuka pintu bagi aplikasi AI di bidang-bidang yang memerlukan analisis mendalam seperti riset ilmiah, analisis keuangan, dan bahkan diagnosa medis awal.</p><p class="text-lg leading-relaxed">"Kami tidak hanya ingin menciptakan model yang bisa ''berbicara'', tetapi juga model yang bisa ''berpikir'' dan membantu memecahkan masalah nyata," ujar Dr. Sarah Mitchell, kepala tim riset di OpenAI. "Dengan GPT-5, kami selangkah lebih dekat menuju tujuan tersebut."</p>',
  'Dr. Sarah Mitchell',
  '2025-01-15',
  '5 menit',
  'https://images.unsplash.com/photo-1677756119517-756a188d2d94?q=80&w=2070&auto=format&fit=crop',
  TRUE,
  'id',
  '{"GPT-5 Release", "AI Research Tools"}'
),
(
  'Microsoft Copilot Integration in Education: Transforming Learning',
  'How Microsoft''s AI assistant is revolutionizing the way students and educators approach learning and teaching.',
  '<p class="mb-4 text-lg leading-relaxed">Microsoft is making significant strides in the educational technology sector with the deep integration of its AI assistant, Copilot, into its suite of learning tools. This move is set to revolutionize traditional teaching and learning paradigms, offering personalized assistance to both students and educators on an unprecedented scale.</p><h3 class="text-2xl font-bold text-white mt-6 mb-3">A Personalized Tutor for Every Student</h3><p class="mb-4 text-lg leading-relaxed">For students, Copilot acts as a 24/7 personal tutor. It can explain complex concepts in simple terms, help with homework by providing hints instead of direct answers, and assist in research by summarizing long academic papers. The integration with tools like OneNote and Teams means students can get AI-powered help directly within their workflow.</p><p class="mb-4 text-lg leading-relaxed">"The goal is to foster a deeper understanding and encourage critical thinking, not just to provide easy answers," explains Prof. James Wilson, an educational technology consultant working with Microsoft. "Copilot guides students through their learning process, adapting to their individual pace and style."</p><h3 class="text-2xl font-bold text-white mt-6 mb-3">Empowering Educators</h3><p class="text-lg leading-relaxed">Educators also stand to benefit immensely. Copilot can automate administrative tasks such as creating lesson plans, generating quiz questions, and grading assignments, freeing up valuable time for them to focus on more impactful student interactions. It can also provide insights into class performance, highlighting topics where students are struggling collectively.</p>',
  'Prof. James Wilson',
  '2025-01-14',
  '7 minutes',
  'https://images.unsplash.com/photo-1446776811953-b23d579424c1?q=80&w=2072&auto=format&fit=crop',
  TRUE,
  'en',
  '{"AI Ethics in Education", "AI Research Tools"}'
),
(
  'Peran AI dalam Mendeteksi Penyakit Kanker Secara Dini',
  'Algoritma machine learning terbaru mampu menganalisis citra medis dengan akurasi yang melampaui ahli radiologi manusia.',
  '<p class="mb-4 text-lg leading-relaxed">Sebuah terobosan signifikan dalam dunia medis telah tercapai berkat pemanfaatan kecerdasan buatan (AI). Tim peneliti dari Universitas Stanford telah mengembangkan sebuah algoritma machine learning yang mampu mendeteksi tanda-tanda awal kanker dari gambar hasil CT scan dengan tingkat akurasi mencapai 94%.</p><p class="mb-4 text-lg leading-relaxed">Algoritma ini dilatih menggunakan jutaan gambar medis anonim, memungkinkannya untuk mengenali pola-pola subtil yang seringkali terlewat oleh mata manusia. Kecepatan dan efisiensi AI dalam menganalisis data dalam jumlah besar diharapkan dapat mempercepat proses diagnosis dan memungkinkan intervensi medis yang lebih cepat dan efektif.</p>',
  'Dr. Evelyn Reed',
  '2025-01-12',
  '6 menit',
  'https://images.unsplash.com/photo-1579684385127-1ef15d508118?q=80&w=1780&auto=format&fit=crop',
  FALSE,
  'id',
  '{"AI in Healthcare", "Machine Learning"}'
),
(
  'The Ethical Dilemma of Autonomous Vehicles',
  'As self-driving cars become more prevalent, who is responsible in the event of an unavoidable accident? A deep dive into the ethics.',
  '<p class="mb-4 text-lg leading-relaxed">The rise of autonomous vehicles (AVs) promises safer roads and more efficient travel. However, it also introduces complex ethical dilemmas. The most famous of these is the "trolley problem," adapted for the modern age: in a no-win situation, should a self-driving car prioritize the safety of its passengers or minimize harm to pedestrians?</p><p class="mb-4 text-lg leading-relaxed">Manufacturers, programmers, and regulators are now grappling with how to encode moral decisions into machines. Different cultures may have different ethical priorities, making a universal solution nearly impossible. This article explores the various philosophical approaches and the ongoing debate among tech leaders and ethicists.</p>',
  'David Chen',
  '2025-01-10',
  '8 minutes',
  'https://images.unsplash.com/photo-1559610228-a273e343b469?q=80&w=2070&auto=format&fit=crop',
  FALSE,
  'en',
  '{"AI Ethics", "Autonomous Vehicles"}'
),
(
  'Masa Depan Karir di Era AI: Pekerjaan Apa yang Akan Bertahan?',
  'Bagaimana mahasiswa dapat mempersiapkan diri untuk pasar kerja yang terus berubah akibat otomatisasi dan kecerdasan buatan.',
  '<p class="mb-4 text-lg leading-relaxed">Kekhawatiran tentang AI mengambil alih pekerjaan manusia semakin meningkat. Namun, para ahli berpendapat bahwa AI lebih cenderung mengubah pekerjaan daripada menghilangkannya. Pekerjaan yang membutuhkan kreativitas, kecerdasan emosional, dan pemikiran strategis kompleks akan tetap diminati.</p><p class="mb-4 text-lg leading-relaxed">Bagi mahasiswa, ini berarti fokus pada pengembangan ''soft skills'' sama pentingnya dengan keahlian teknis. Kemampuan beradaptasi, belajar hal baru (learnability), dan berkolaborasi dengan sistem AI akan menjadi kunci sukses di masa depan.</p>',
  'Rina Hartono, M.Psi.',
  '2025-01-08',
  '5 menit',
  'https://images.unsplash.com/photo-1552664730-d307ca884978?q=80&w=2070&auto=format&fit=crop',
  FALSE,
  'id',
  '{"Machine Learning Careers", "Future of Work"}'
),
(
  'Generative AI: Creating Art from Thin Air',
  'Exploring the world of generative art, where algorithms and artists collaborate to produce stunning and unpredictable visual works.',
  '<p class="mb-4 text-lg leading-relaxed">From DALL-E 2 to Midjourney, generative AI models are captivating the world with their ability to create breathtaking images from simple text prompts. This technology is not just a novelty; it represents a new frontier for artistic expression.</p><p class="mb-4 text-lg leading-relaxed">This article delves into the technology behind these models, showcases incredible works of AI-generated art, and discusses the implications for the creative industry. Is it the end of human artists, or the beginning of a powerful new partnership between human creativity and machine intelligence?</p>',
  'Sophia Miller',
  '2025-01-05',
  '7 minutes',
  'https://images.unsplash.com/photo-1682343243128-2fe9a88815f9?q=80&w=1854&auto=format&fit=crop',
  TRUE,
  'en',
  '{"Generative AI", "Art"}'
);
```

After completing these steps, your application will successfully fetch and display news articles directly from your Supabase database.